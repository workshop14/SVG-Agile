/*! svgagile - v0.0.0 - 25-04-2014 */

var Sprite;!function(){function a(a){return a.transform.baseVal.consolidate()}function b(a){return a.createSVGTransform(a.createSVGMatrix())}function c(a,b){var c=b.matrix,d="matrix("+[c.a,c.b,c.c,c.d,c.e,c.f].join(" ")+")";a.setAttribute("transform",d)}Sprite=function(d){var e,f=d.ownerSVGElement;if(!f)throw"Not an SVG element";var g=a(d)||b(f),h=g.matrix.scale(1);c(d,g),this.readAnchor=function(){return h},this.setAnchor=function(a){h=a},this.setCurrent=function(a){g.setMatrix(a),c(d,g)},this.updateCTM=function(){e=d.getScreenCTM().inverse()},this.scaleTo=function(a,b){return a=e.a*a,b=e.d*b,{dX:a,dY:b}},this.mapTo=function(a,b){return a=e.a*a+e.e,b=e.d*b+e.f,{x:a,y:b}},this.updateCTM()},Sprite.prototype.drag=function(a,b,c){var d=this.scaleTo(a,b);this.translate(d.dX,d.dY,c)},Sprite.prototype.translate=function(a,b,c){var d=this.readAnchor().translate(a,b);this.setCurrent(d),c&&this.setAnchor(d)},Sprite.prototype.zoom=function(a,b,c,d){var e=this.mapTo(a,b);c=Math.max(c,.4),this.scale(e.x,e.y,c,d),this.updateCTM()},Sprite.prototype.scale=function(a,b,c,d){var e=this.readAnchor().translate(a,b).scale(c).translate(-a,-b);this.setCurrent(e),d&&this.setAnchor(e)}}();var Agile;!function(){function a(a,b){for(;a;){if(a===b)return!0;a=a.parentNode}}Agile=function(b){function c(b){a(b.target,j)&&i("on")}function d(a){k.drag(a.gesture.deltaX,a.gesture.deltaY)}function e(a){k.drag(a.gesture.deltaX,a.gesture.deltaY,!0)}function f(a){k.zoom(a.gesture.center.pageX,a.gesture.center.pageY,a.gesture.scale)}function g(a){k.zoom(a.gesture.center.pageX,a.gesture.center.pageY,a.gesture.scale,!0)}function h(){i("off")}function i(a){l[a]("drag",d),l[a]("pinch",f),l[a]("transformend",g),l[a]("dragend",e),l[a]("release",h)}var j=document.getElementById(b);if(!j)throw"No element found";var k=new Sprite(j),l=new Hammer(document,{preventDefault:!0}).on("touch",c);this.kill=function(){i("off"),l.off("touch",c)},this._test={hammertime:l}}}();